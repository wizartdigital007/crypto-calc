<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NHL News</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; max-width: 800px; margin: 0 auto; }
        .news-item { border-bottom: 1px solid #ccc; padding: 10px; cursor: pointer; }
        .news-item:hover { background: #f5f5f5; }
        .title { font-size: 18px; font-weight: bold; }
        .meta { font-size: 14px; color: #666; }
        .content { display: none; margin-top: 10px; font-size: 16px; }
        .content.active { display: block; }
    </style>
</head>
<body>
    <h1>NHL News</h1>
    <div id="newsFeed"></div>

    <script>
        const apiKey = "aef5d7ae749041de83f9d2285166f961"; // Вставь свой ключ NewsAPI сюда

        async function fetchNews() {
            try {
                const response = await fetch(`https://newsapi.org/v2/everything?q=NHL&language=en&sortBy=publishedAt&apiKey=${apiKey}`);
                if (!response.ok) {
                    throw new Error(`Ошибка API: ${response.status} - ${await response.text()}`);
                }
                const data = await response.json();
                return data.articles.slice(0, 3).map(article => ({
                    title: article.title,
                    source: article.source.name,
                    pubTime: article.publishedAt,
                    content: article.description || "No description available."
                }));
            } catch (error) {
                console.error("Ошибка загрузки:", error);
                return [];
            }
        }

        function timeAgo(pubTime) {
            const now = new Date();
            const pubDate = new Date(pubTime);
            const diff = Math.floor((now - pubDate) / 60000);
            return diff < 1 ? "just now" : `${diff} minutes ago`;
        }

        function formatPubTime(pubTime) {
            const date = new Date(pubTime);
            return date.toLocaleString("en-US", { dateStyle: "short", timeStyle: "short" });
        }

        function toggleContent(index) {
            const content = document.getElementById(`content-${index}`);
            content.classList.toggle("active");
        }

        async function renderNews() {
            const newsData = await fetchNews();
            const feed = document.getElementById("newsFeed");
            feed.innerHTML = newsData.length ? newsData.map((news, i) => `
                <div class="news-item" onclick="toggleContent(${i})">
                    <div class="title">${news.title}</div>
                    <div class="meta">${news.source} | ${timeAgo(news.pubTime)} | ${formatPubTime(news.pubTime)}</div>
                    <div class="content" id="content-${i}">${news.content}</div>
                </div>
            `).join("") : "Не удалось загрузить новости. Проверь ключ API или подключение.";
        }

        renderNews();
    </script>
</body>
</html>
